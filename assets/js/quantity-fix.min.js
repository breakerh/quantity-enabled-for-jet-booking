!function(){const t=jQuery(document).find(".jet-booking-form");if(!t.length)return;const e=t.find(".single_add_to_cart_button"),o=t.find(".quantity input.qty");window.JetPlugins.hooks.addFilter("jet-booking.calendar.config","jet-booking",(t=>({...t,stickyMonths:!0}))),jQuery(document).on("jet-booking/init-calendar",(()=>{jQuery(document).unbind("change.JetBookingProduct"),jQuery(document).unbind("click.JetWooBuilder"),jQuery(document).on("change.JetBookingProduct",(function(a){let n=a.target;"jet_abaf_field"!==n?.id&&document.querySelector("#jet_abaf_field").value.length<1||("jet_abaf_field"!==n.id&&(n=t.find("#jet_abaf_field")[0]),e.removeClass("disabled").prop("disabled",!1),jQuery.ajax({url:window.jetWooBuilderData.ajax_url,type:"POST",dataType:"json",data:{action:"jet_booking_product_set_total_price",total:JetBooking.getApartmentPrice(jQuery(n))*o.val()}}).done((function(t){jQuery(".jet-abaf-product-total").html(t.data.html)})).fail((function(t,e,o){alert(o)})))})),o.on("change",(t=>{const e=document.querySelector("#jet_abaf_field"),o=e.value,a=e.getAttribute("data-format");if(window.jetBookingState.bookingCalendars[1].data("dateRangePicker").redraw(),o?.length>1){const[t,e]=o.split(" - ");window.jetBookingState.bookingCalendars[1].data("dateRangePicker").setStart(moment(t,a).format("YYYY-MM-DD")),window.jetBookingState.bookingCalendars[1].data("dateRangePicker").setEnd(moment(e,a).format("YYYY-MM-DD"))}})),e.on("click.JetWooBuilder",(function(o){o.preventDefault();const a=t.closest("form").serialize(),n=e.val();e.addClass("loading"),jQuery.ajax({url:window.jetWooBuilderData.ajax_url,method:"POST",async:!1,data:"action=jet_booking_add_cart_single_product&product="+n+"&"+a,success:function(t){e.addClass("added").removeClass("loading"),t&&(jQuery(document.body).trigger("wc_fragment_refresh"),jQuery(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,e]),t.fragments?.notices_html&&jQuery(".woocommerce-notices-wrapper").html(t.fragments?.notices_html))}})}))}))}();
